/* 0.2.0 */
function pegasus(a,b){return b=new XMLHttpRequest,b.open("GET",a),a=[],b.onreadystatechange=b.then=function(c,d,e){if(c.call&&(a=[,c,d]),4==b.readyState&&(e=a[0|b.status/200]))try{e(JSON.parse(b.responseText),b)}catch(f){e(null,b)}},b.send(),b}!function(){function a(a,d,e){var f;if(d.url&&(f="string"==typeof d.url?d.url:d.url()),"read"===a&&f){var g=c[f];return g?(g.then(function(a){delete c[f];var b=e.reset?"reset":"set";d[b](a),e&&e.success&&e.success(a),d.trigger("sync",d,a,e)},function(a,b){e&&e.error&&e.error(b),d.trigger("error",d,b,e)}),g):b(a,d,e)}return b(a,d,e)}var b,c={};window.BackbonePegasus={get:function(a){c[a]=pegasus(a)},setup:function(){b=Backbone.sync,Backbone.sync=a}}}();